{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://gist.githubusercontent.com/StefanoFrontini/d615dacd6d07d3605cc7e27ce8292a7a/raw/482ed276fe487bae39d92d1213e2aaf258701e2d/io-revamp.json",
    "format": { "property": "services_by_taxonomy" }
  },
  "width": "container",
  "height": "container",
  "padding": 5,
  "encoding": {
    "y": {
      "field": "topic",
      "sort": { "field": "ranking" },
      "scale": { "padding": 0 },
      "axis": {
        "domain": false,
        "labelAlign": "left",
        "labelLimit": 0,
        "labelOffset": -20,
        "labelPadding": 0,
        "ticks": false,
        "labelFontWeight": 600,
        "labelFont": "titilliumWeb",
        "grid": true,
        "gridColor": "#D2D6E3"
      }
    }
  },
  "layer": [
    {
      "mark": { "type": "bar", "height": 19, "cornerRadiusEnd": 5 },
      "encoding": {
        "x": {
          "field": "num_serv",
          "type": "quantitative",
          "aggregate": "sum",
          "axis": {
            "format": "~s",
            "gridDash": [4, 4],
            "labelFontWeight": 600,
            "labelFont": "titilliumWeb",
            "tickDash": [4, 4],
            "tickColor": {
              "condition": {
                "test": "datum.value !== 0",
                "value": "#D2D6E3"
              },
              "value": "none"
            },
            "grid": true,
            "gridColor": {
              "condition": {
                "test": "datum.value !== 0",
                "value": "#D2D6E3"
              },
              "value": "none"
            },
            "labelExpr": "datum.index === 0 ? '' : datum.label"
          }
        },
        "color": { "value": "#0B3EE3" }
      }
    },
    {
      "mark": { "type": "bar", "tooltip": true, "color": "transparent" },
      "encoding": {
        "tooltip": [
          { "field": "topic" },
          {
            "field": "num_serv",
            "format": ",d"
          }
        ]
      }
    }
  ]
}
